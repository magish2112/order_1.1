# üìù –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π PostgreSQL

## –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DATABASE_URL

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `DATABASE_URL` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ PostgreSQL:

```bash
# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
export DATABASE_URL="postgresql://postgres:postgres@localhost:5432/order_db"

# –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ apps/api/
echo "DATABASE_URL=postgresql://postgres:postgres@localhost:5432/order_db" > apps/api/.env
```

## –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ PostgreSQL

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Docker:

```bash
# –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ PostgreSQL
docker-compose up -d postgres

# –ò–ª–∏ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up -d
```

## –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
cd apps/api

# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
npx prisma migrate dev --name init_postgresql

# –≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç:
# - –ù–æ–≤—É—é –ø–∞–ø–∫—É –≤ prisma/migrations/
# - SQL —Ñ–∞–π–ª —Å –º–∏–≥—Ä–∞—Ü–∏–µ–π
# - –û–±–Ω–æ–≤–∏—Ç migration_lock.toml
```

## –®–∞–≥ 4: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

```bash
# –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ migrate deploy (–Ω–µ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é)
npx prisma migrate deploy

# –ò–ª–∏ —á–µ—Ä–µ–∑ Docker
docker-compose exec api npx prisma migrate deploy
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –º–∏–≥—Ä–∞—Ü–∏–π
npx prisma migrate status

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–π
npx prisma migrate resolve --applied <migration_name>
```

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ù–µ —É–¥–∞–ª—è–π—Ç–µ —Å—Ç–∞—Ä—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ SQLite** - –æ–Ω–∏ –º–æ–≥—É—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
2. **–ú–∏–≥—Ä–∞—Ü–∏–∏ PostgreSQL** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞–ø–∫–µ –∏–ª–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `postgresql_`
3. **–í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏** –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑–µ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
4. **–î–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø** –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –º–∏–≥—Ä–∞—Ü–∏–π –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

## –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–π

```bash
# –û—Ç–∫–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–∏–≥—Ä–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!)
npx prisma migrate resolve --rolled-back <migration_name>

# –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –æ—Ç–∫–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```

